#include"code_def.h"
#include<stdbool.h>

char Music_1[]   ={ 0x16,0x03,0x21,0x03,0x23,0x03,0x26,0x03,
                    0x31,0x03,0x33,0x03,0x17,0x03,0x22,0x03,
                    0x25,0x03,0x27,0x03,0x12,0x03,0x15,0x03,
                    0x21,0x03,0x23,0x03,0x26,0x03,0x31,0x03,
                    0x33,0x03,0x36,0x03,0x32,0x03,0x33,0x03,
                    0x35,0x04,0x33,0x04,0x32,0x03,0x27,0x03,
                    0x25,0x03,0x16,0x03,0x21,0x03,0x23,0x03,
                    0x26,0x03,0x31,0x03,0x33,0x03,0x17,0x03,
                    0x22,0x03,0x25,0x03,0x27,0x03,0x32,0x03,
                    0x35,0x03,0x21,0x03,0x23,0x03,0x26,0x03,
                    0x31,0x03,0x33,0x03,0x36,0x03,0x32,0x03,
                    0x33,0x03,0x35,0x04,0x33,0x04,0x32,0x03,
                    0x27,0x03,0x25,0x03,0x26,0x02,0x33,0x02,
                    0x33,0x02,0x27,0x02,0x33,0x02,0x33,0x02,
                    0x31,0x02,0x33,0x02,0x33,0x02,0x32,0x03,
                    0x33,0x03,0x35,0x04,0x33,0x04,0x27,0x03,
                    0x25,0x03,0x26,0x02,0x33,0x02,0x33,0x02,
                    0x27,0x02,0x33,0x02,0x33,0x02,0x24,0x03,
                    0x26,0x03,0x32,0x03,0x34,0x03,0x35,0x03,
                    0x34,0x03,0x37,0x02,0x36,0x01,0x33,0x02,
                    0x26,0x03,0x27,0x03,0x31,0x03,0x33,0x03,
                    0x32,0x02,0x25,0x02,0x32,0x02,0x31,0x02,
                    0x27,0x03,0x31,0x03,0x27,0x03,0x25,0x03,
                    0x23,0x02,0x26,0x02,0x26,0x02,0x33,0x02,
                    0x26,0x03,0x27,0x03,0x31,0x03,0x35,0x03,
                    0x34,0x02,0x32,0x02,0x32,0x03,0x33,0x03,
                    0x31,0x03,0x27,0x03,0x25,0x03,0x27,0x02,
                    0x26,0x00,0x33,0x02,0x26,0x03,0x27,0x03,
                    0x31,0x03,0x33,0x03,0x32,0x02,0x25,0x02,
                    0x32,0x02,0x31,0x02,0x27,0x03,0x31,0x03,
                    0x27,0x03,0x25,0x03,0x23,0x02,0x26,0x02,
                    0x26,0x02,0x33,0x02,0x26,0x03,0x27,0x03,
                    0x31,0x03,0x35,0x03,0x34,0x02,0x32,0x02,
                    0x32,0x03,0x33,0x03,0x31,0x03,0x27,0x03,
                    0x25,0x02,0x27,0x02,0x26,0x00,0x00,0x00 };__attribute__((aligned(2)));

char Music_2[]   ={ 0x00,0x04,0x16,0x04,0x16,0x04,0x26,0x03,
                    0x23,0x03,0x22,0x04,0x00,0x04,0x22,0x03,
                    0x21,0x04,0x21,0x04,0x16,0x04,0x21,0x04,
                    0x22,0x04,0x15,0x04,0x15,0x04,0x26,0x03,
                    0x23,0x03,0x22,0x04,0x00,0x04,0x22,0x03,
                    0x21,0x04,0x21,0x04,0x16,0x04,0x21,0x04,
                    0x22,0x04,0x14,0x04,0x14,0x04,0x26,0x03,
                    0x23,0x03,0x22,0x04,0x00,0x04,0x22,0x03,
                    0x21,0x04,0x21,0x04,0x16,0x04,0x21,0x04,
                    0x22,0x04,0x14,0x04,0x14,0x04,0x26,0x03,
                    0x23,0x03,0x22,0x04,0x00,0x04,0x22,0x03,
                    0x21,0x04,0x21,0x04,0x16,0x04,0x21,0x04,
                    0x22,0x04,0x31,0x03,0x31,0x04,0x31,0x04,
                    0x00,0x04,0x31,0x03,0x31,0x04,0x31,0x04,
                    0x26,0x03,0x26,0x04,0x26,0x02,0x31,0x03,
                    0x31,0x04,0x31,0x04,0x00,0x04,0x32,0x03,
                    0x32,0x04,0x32,0x04,0x32,0x05,0x33,0x05,
                    0x32,0x05,0x31,0x04,0x26,0x04,0x31,0x04,
                    0x32,0x04,0x00,0x03,0x31,0x03,0x31,0x04,
                    0x31,0x04,0x00,0x04,0x32,0x03,0x32,0x04,
                    0x00,0x04,0x33,0x03,0x35,0x04,0x35,0x04,
                    0x33,0x03,0x36,0x03,0x36,0x03,0x36,0x04,
                    0x33,0x04,0x36,0x04,0x35,0x04,0x35,0x02,
                    0x00,0x02,0x31,0x03,0x31,0x04,0x31,0x04,
                    0x00,0x04,0x31,0x03,0x31,0x04,0x31,0x04,
                    0x26,0x03,0x26,0x04,0x26,0x02,0x31,0x03,
                    0x31,0x04,0x31,0x04,0x00,0x04,0x31,0x03,
                    0x26,0x04,0x00,0x04,0x31,0x03,0x27,0x04,
                    0x00,0x04,0x26,0x04,0x25,0x03,0x36,0x03,
                    0x33,0x03,0x32,0x03,0x31,0x03,0x35,0x03,
                    0x32,0x03,0x31,0x03,0x27,0x03,0x24,0x03,
                    0x25,0x04,0x24,0x04,0x00,0x04,0x26,0x03,
                    0x27,0x04,0x27,0x02,0x00,0x02,0x00,0x02,
                    0x26,0x04,0x24,0x04,0x26,0x04,0x27,0x04,
                    0x31,0x04,0x27,0x04,0x26,0x04,0x32,0x05,
                    0x32,0x05,0x31,0x05,0x26,0x05,0x26,0x03,
                    0x27,0x02,0x27,0x02,0x27,0x04,0x33,0x03,
                    0x33,0x04,0x35,0x03,0x33,0x04,0x32,0x04,
                    0x32,0x04,0x31,0x04,0x26,0x04,0x27,0x04,
                    0x31,0x03,0x32,0x03,0x33,0x03,0x35,0x03,
                    0x35,0x03,0x32,0x03,0x32,0x04,0x32,0x04,
                    0x31,0x04,0x32,0x04,0x32,0x01,0x16,0x03,
                    0x17,0x03,0x21,0x03,0x26,0x03,0x25,0x02,
                    0x23,0x02,0x22,0x02,0x23,0x02,0x25,0x02,
                    0x23,0x02,0x26,0x01,0x33,0x04,0x32,0x04,
                    0x32,0x04,0x31,0x04,0x31,0x04,0x27,0x04,
                    0x26,0x04,0x26,0x04,0x22,0x01,0x24,0x01,
                    0x00,0x00};__attribute__((aligned(2)));

char Sound[]     ={ 0x32,0x02,0x00,0x00};__attribute__((aligned(2)));

bool isPlaying,isStop;
uint32_t Music_num = 0;

int main()
{
		NVIC_CTRL_ADDR = 1;
		isPlaying = false;
    isStop = false;

    while(1);
    return 0;
}

void KEY()
{
  uint32_t KeyReg;

	KeyReg = KeyboardReg;
	if(KeyReg & 0x00000001)
	{
		if(isPlaying)
    {
      if(isStop)
      {
        StartBGM();
        isStop = false;
      }
      else
      {
        StopBGM();
        isStop = true;
      }
    }
    else
    {
      PlayBGM(Music_1,true);
      isPlaying = true;
    }
	}
  else //if(KeyReg & 0x00000002)
	{
		if(Music_num == 1)
		{
			Music_num = 0;
			ResetBGM();
      Delay(100);
			PlayBGM(Music_1,true);
		}
		else
		{
			Music_num = 1;
			ResetBGM();
      Delay(100);
			PlayBGM(Music_2,true);
		}
	}
}
